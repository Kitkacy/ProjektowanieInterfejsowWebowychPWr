import{u as f,b as j,r as d,j as e,H as v,L as c}from"./index-D9LMjW3T.js";function k(){const{addBook:h,filterOptions:i,loading:w,error:N}=f(),m=j(),[o,u]=d.useState(!1),[x,n]=d.useState(null),[r,b]=d.useState({title:"",author:"",price:"",condition:"Good",category:"True Crime",description:"",publishYear:2025,pages:"",language:"English",format:"Paperback"}),l=s=>{const{name:t,value:a}=s.target;b(p=>({...p,[t]:t==="price"||t==="pages"||t==="publishYear"?Number(a):a}))},g=async s=>{if(s.preventDefault(),!r.title||!r.author||!r.price){n("Please fill in all required fields");return}try{u(!0),n(null),await h(r),m("/")}catch(t){console.error("Error adding book:",t),n(t.message||"Failed to add book. Please try again.")}finally{u(!1)}};return e.jsxs("main",{className:"flex flex-col items-center pt-16 pb-4",children:[e.jsxs(v,{children:[e.jsx("title",{children:"Add New Book - Books4Cash"}),e.jsx("meta",{name:"description",content:"Add a new book to the Books4Cash marketplace"})]}),e.jsxs("header",{className:"w-full bg-green-700 text-white p-4 flex justify-between items-center fixed top-0 left-0",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(c,{to:"/",className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{d:"M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.38A7.968 7.968 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.969 7.969 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Books4Cash.io"})]})}),e.jsx("nav",{children:e.jsxs("ul",{className:"flex gap-6 items-center",children:[e.jsx("li",{children:e.jsx(c,{to:"/",className:"hover:underline",children:"Home"})}),e.jsx("li",{children:e.jsx("button",{className:"bg-white text-green-700 px-3 py-1 rounded-lg hover:bg-green-50",children:"Login"})})]})})]}),e.jsxs("div",{className:"w-full max-w-4xl mx-auto p-8",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx(c,{to:"/",className:"text-green-600 hover:underline mr-2",children:"← Back to Home"}),e.jsx("h2",{className:"text-2xl font-semibold ml-4",children:"Add New Book"})]}),e.jsx("div",{className:"mb-4 bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center text-blue-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsx("span",{className:"font-semibold text-sm",children:"This book will be added to Firestore database"})]})}),x&&e.jsx("div",{className:"mb-4 bg-red-50 border border-red-300 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center text-red-700",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),e.jsx("span",{children:x})]})}),e.jsxs("form",{onSubmit:g,className:"bg-white p-6 rounded-lg border shadow-sm",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:r.title,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"author",className:"block text-sm font-medium text-gray-700 mb-1",children:"Author *"}),e.jsx("input",{type:"text",id:"author",name:"author",value:r.author,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($) *"}),e.jsx("input",{type:"number",step:"0.01",id:"price",name:"price",value:r.price,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"condition",className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition"}),e.jsx("select",{id:"condition",name:"condition",value:r.condition,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",children:i.conditions.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),e.jsx("select",{id:"category",name:"category",value:r.category,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",children:i.categories.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"format",className:"block text-sm font-medium text-gray-700 mb-1",children:"Format"}),e.jsx("select",{id:"format",name:"format",value:r.format,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",children:i.formats.map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"publishYear",className:"block text-sm font-medium text-gray-700 mb-1",children:"Publication Year"}),e.jsx("select",{id:"publishYear",name:"publishYear",value:r.publishYear,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900",children:[...Array(10)].map((s,t)=>{const a=2023-t;return e.jsx("option",{value:a,children:a},a)})})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pages",className:"block text-sm font-medium text-gray-700 mb-1",children:"Pages"}),e.jsx("input",{type:"number",id:"pages",name:"pages",value:r.pages,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",rows:"4",value:r.description,onChange:l,className:"w-full p-2 border rounded focus:ring focus:ring-blue-200 focus:border-blue-500 text-gray-900"})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx("button",{type:"button",onClick:()=>m("/"),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-100",disabled:o,children:"Cancel"}),e.jsx("button",{type:"submit",className:`px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center ${o?"opacity-70 cursor-not-allowed":""}`,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add Book"})]})]})]})]})}export{k as default};
